<Window x:Class="WoWLauncher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Horizons Launcher"
        Width="860" Height="600"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="Transparent"
        MouseDown="Window_MouseDown">

    <!-- ========= Recursos ========= -->
    <Window.Resources>
        <!-- Botón Cerrar con imágenes de estados -->
        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="{x:Null}"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Image x:Name="img"
                                   Width="32" Height="32"
                                   Source="pack://application:,,,/images/Close.PNG"
                                   Stretch="Fill"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="img" Property="Source" Value="pack://application:,,,/images/Close-Hover.png"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="img" Property="Source" Value="pack://application:,,,/images/Close-Click.PNG"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="img" Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- ========= Layout ========= -->
    <Grid>
        <!-- Fondo del launcher -->
        <Image Source="pack://application:,,,/images/Window.png" Stretch="Fill"/>

        <!-- Contenido -->
        <Grid Margin="28,110,28,28">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Cabecera (estado servidor + cerrar) -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal" VerticalAlignment="Top" Margin="0,0,0,8"/>

                <Button
                        Width="32" Height="32"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Style="{StaticResource CloseButtonStyle}"
                        Click="Close_Click" Grid.ColumnSpan="2" Margin="0,21,7,0"/>
            </Grid>

            <!-- Panel central -->
            <StackPanel Grid.Row="1"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Width="520">

                <!-- Mensaje de progreso -->
                <TextBlock x:Name="progressInfo"
                           Text="Comprobando actualizaciones..."
                           Foreground="#CFCFCF"
                           FontSize="14"
                           TextAlignment="Center"
                           TextWrapping="Wrap"
                           Margin="0,0,0,8"/>

                <!-- Barra de progreso con fondo decorado -->
                <Grid Margin="0,0,0,8">
                    <!-- Marco decorativo -->
                    <Image Source="pack://application:,,,/images/PatchBar.png"
                           Height="28" Stretch="Fill" Opacity="0.95"/>
                    <!-- ProgressBar por encima -->
                    <ProgressBar x:Name="progressBar"
                                 Height="18"
                                 Minimum="0" Maximum="100"
                                 Value="0"
                                 Margin="12,5"
                                 Background="#11000000"
                                 BorderBrush="#22000000"/>
                </Grid>

                <!-- Texto pequeño opcional -->
                <TextBlock x:Name="downloadStatus"
                           Text=""
                           Foreground="#9FC3D1"
                           FontSize="12"
                           TextAlignment="Center"
                           Visibility="Collapsed"/>
            </StackPanel>

            <!-- Botón JUGAR -->
            <StackPanel Grid.Row="2" HorizontalAlignment="Center" Margin="0,18,0,0">
                <Button x:Name="playBtn"
                        Content="JUGAR"
                        Width="190" Height="46"
                        FontSize="18"
                        FontWeight="Bold"
                        Foreground="White"
                        Background="#1E8BC3"
                        BorderThickness="0"
                        Padding="8,2"
                        Cursor="Hand"
                        Click="playBtn_Click"
                        IsEnabled="False"/>
            </StackPanel>
        </Grid>
        <Image x:Name="serverStatusIcon"
            Source="/images/Indicator-Yellow.PNG" Margin="345,504,499,80"/>
        <TextBlock x:Name="serverStatus"
            Text="Comprobando servidor..."
            Foreground="#E6E6E6"
            FontSize="14"
                               Margin="369,502,339,78"/>
    </Grid>
</Window>
